<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Ambrose＊Starlit">
    <title>Ambrose＊Starlit</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="firebase-config.js"></script>
</head>
<body>
    <div id="app">
        <!-- ヘッダー -->
        <header>
            <div class="header-content">
                <img src="logo.png" alt="Ambrose＊Starlit" class="app-logo">
                <div class="header-actions">
                    <button id="refreshBtn" class="icon-btn" title="更新する">
                        <span style="font-size: 1.2rem;">🧸</span>
                    </button>
                    <button id="helpBtn" class="icon-btn" title="使い方">
                        <img src="icon-help.png" alt="使い方" class="btn-icon">
                    </button>
                    <button id="searchBtn" class="icon-btn" title="検索">
                        <img src="icon-search.png" alt="検索" class="btn-icon">
                    </button>
                    <button id="settingsBtn" class="icon-btn" title="設定">
                        <img src="icon-settings.png" alt="設定" class="btn-icon">
                    </button>
                </div>
            </div>
        </header>

        <!-- タイムライン -->
        <div id="timeline" class="timeline"></div>

        <!-- 検索モーダル -->
        <div id="searchModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2><img src="icon-search.png" alt="" class="modal-title-icon"> ハッシュタグ検索</h2>
                    <button class="close-btn">&times;</button>
                </div>
                <div class="modal-body">
                    <input type="text" id="hashtagSearch" placeholder="#タグを検索..." class="search-input">
                    <button id="clearFilterBtn" class="btn-secondary full-width">すべて表示</button>
                    <div id="hashtagList" class="hashtag-list"></div>
                </div>
            </div>
        </div>

        <!-- 使い方モーダル -->
        <div id="helpModal" class="modal">
            <div class="modal-content modal-help">
                <div class="modal-header">
                    <h2><img src="icon-help.png" alt="" class="modal-title-icon"> 使い方ガイド</h2>
                    <button class="close-btn">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="help-section">
                        <div class="help-welcome">
                            <img src="logo.png" alt="Ambrose＊Starlit" class="help-welcome-icon">
                            <h3>Ambrose＊Starlitへようこそ！</h3>
                        </div>
                        <p>VTuberアンブローズの活動記録・つぶやきページです。<br>開発進捗や日常の出来事などを投稿しています。</p>
                    </div>

                    <div class="help-section">
                        <h3>📖 このページについて</h3>
                        <p>このページでは、アンブローズの日々の活動や制作物の進捗、ちょっとした独り言などを見ることができます。</p>
                        <p>タイムライン形式で新しい投稿から順に表示されます。</p>
                    </div>

                    <div class="help-section">
                        <h3>🏷️ ハッシュタグで探す</h3>
                        <p>投稿には <span class="hashtag">#開発</span> <span class="hashtag">#イラスト</span> <span class="hashtag">#雑談</span> などのハッシュタグがついています。</p>
                        <p>気になるタグをクリックすると、そのタグがついた投稿だけを見ることができます。</p>
                        <p style="margin-top: 12px;">画面上部の <img src="icon-search.png" alt="" style="width: 20px; height: 20px; vertical-align: middle;"> 検索ボタンから、ハッシュタグ一覧を見ることもできます。</p>
                    </div>

                    <div class="help-section">
                        <h3>🎨 見た目を変更</h3>
                        <p>画面上部の <img src="icon-settings.png" alt="" style="width: 20px; height: 20px; vertical-align: middle;"> 設定ボタンから、背景やテーマカラーを変更できます。</p>
                        <p>お好みの雰囲気でお楽しみください！</p>
                    </div>

                    <div class="help-section">
                        <h3>📱 ホーム画面に追加</h3>
                        <p>スマホのホーム画面にアイコンを追加すると、アプリのようにいつでも簡単にアクセスできます！</p>
                        
                        <div class="help-item">
                            <div class="help-text">
                                <strong>iPhone (Safari)</strong>
                                <p>1. 画面下部の共有ボタン（□に↑）をタップ<br>
                                2. 「ホーム画面に追加」を選択<br>
                                3. 「追加」をタップ</p>
                            </div>
                        </div>
                        
                        <div class="help-item">
                            <div class="help-text">
                                <strong>Android (Chrome)</strong>
                                <p>1. 右上のメニュー（⋮）をタップ<br>
                                2. 「ホーム画面に追加」を選択<br>
                                3. 「追加」をタップ</p>
                            </div>
                        </div>
                    </div>

                    <div class="help-section">
                        <h3>🔗 リンクについて</h3>
                        <p>投稿内のURLはクリックすると、新しいタブで開きます。<br>気になる作品やツールなどをチェックしてみてください。</p>
                    </div>

                    <div class="help-section">
                        <h3>💬 お問い合わせ</h3>
                        <p>感想や質問などは、X (Twitter) やその他のSNSでお気軽にどうぞ！</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 設定モーダル -->
        <div id="settingsModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2><img src="icon-settings.png" alt="" class="modal-title-icon"> 設定</h2>
                    <button class="close-btn">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="setting-item">
                        <label>背景画像</label>
                        <div class="bg-pattern-grid">
                            <div class="bg-pattern-item" data-bg="none">
                                <div class="bg-pattern-preview" style="background: var(--theme-bg);"></div>
                                <span>なし</span>
                            </div>
                            <div class="bg-pattern-item" data-bg="bg-check.png">
                                <div class="bg-pattern-preview" style="background: url('bg-check.png'); background-size: cover;"></div>
                                <span>チェック柄</span>
                            </div>
                            <div class="bg-pattern-item" data-bg="bg-cherry.png">
                                <div class="bg-pattern-preview" style="background: url('bg-cherry.png'); background-size: cover;"></div>
                                <span>さくらんぼ</span>
                            </div>
                            <div class="bg-pattern-item" data-bg="bg-sakura.png">
                                <div class="bg-pattern-preview" style="background: url('bg-sakura.png'); background-size: cover;"></div>
                                <span>さくら</span>
                            </div>
                            <div class="bg-pattern-item" data-bg="bg-kinngyo.png">
                                <div class="bg-pattern-preview" style="background: url('bg-kinngyo.png'); background-size: cover;"></div>
                                <span>きんぎょ</span>
                            </div>
                            <div class="bg-pattern-item" data-bg="bg-border.png">
                                <div class="bg-pattern-preview bg-border-preview"></div>
                                <span>ボーダー</span>
                            </div>
                            <div class="bg-pattern-item" data-bg="custom">
                                <div class="bg-pattern-preview" style="background: linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc), linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc); background-size: 20px 20px; background-position: 0 0, 10px 10px;">
                                    <span style="font-size: 2rem;">+</span>
                                </div>
                                <span>カスタム</span>
                            </div>
                        </div>
                        <input type="file" id="bgInput" accept="image/*" style="display: none;">
                        <div class="checkbox-item" style="margin-top: 12px;">
                            <input type="checkbox" id="bgOpacityCheck" checked>
                            <label for="bgOpacityCheck">背景を薄く表示</label>
                        </div>
                    </div>
                    <div class="setting-item">
                        <label>カラーテーマ</label>
                        <select id="themeSelect">
                            <option value="chocolate">チョコレート</option>
                            <option value="sakura">桜</option>
                            <option value="ocean">オーシャン</option>
                            <option value="forest">フォレスト</option>
                            <option value="sunset">サンセット</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="viewer.js"></script>
</body>
</html>
